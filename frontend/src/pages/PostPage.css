:root{
  --card-w: 1000px;
  --post-h: 560px; 
  --cmt-h:  400px;  
  --media-h: 400px; 
}

.postpage{ display:flex; justify-content:center; }
.postview-wrap{ width:var(--card-w); margin:0 auto; }

.postbox{
  width:var(--card-w);
  overflow:visible;
  border:1px solid #1f2430; border-radius:16px; padding:16px; background:transparent;
}

.postbox__head{
  display:grid; grid-template-columns:56px 1fr auto; gap:12px; align-items:center;
}
.postbox__avatar{ width:56px; height:56px; border-radius:50%; object-fit:cover; }
.postbox__meta{ display:flex; flex-direction:column; }
.postbox__author{ font-weight:600; color:#bfa5ff;}
.postbox__time{ font-size:14px; color:#7dd3fc; margin-top:2px; }

.postbox__actions{ display:inline-flex; align-items:center; gap:8px; }
.react-btn{ border:0; background:none; padding:4px; cursor:pointer; }
.react-btn img{ width:24px; height:24px; display:block; }
.react-btn.is-active img{ filter:drop-shadow(0 0 6px #7dd3fcaa); }
.score{ min-width:28px; text-align:center; font-weight:700; }

.postbox__title{
  margin:10px 0 6px; font-size:22px; font-weight:700; overflow-wrap:anywhere; color: rgba(201,216,255,0.9);
}
.postbox__content{
  white-space:pre-wrap; line-height:1.6; margin:8px 0 10px; overflow-wrap:anywhere; color: var(--muted2); font-weight:400;
}

.postbox__cats{ display:flex; flex-wrap:wrap; gap:8px; margin:8px 0 10px; }
.postbox__cat{
  font-size:12px; padding:6px 12px; border-radius:999px;
  background:transparent; color:#e9efff; white-space:nowrap; border: 1px solid #2a3242; color: #305c70;
}

.postbox__media{
  width:100%;
  height:var(--media-h);
  display:flex;
  align-items:center;
  justify-content:center;
  overflow:hidden;
  margin-top:8px;
}

.postbox__carousel-wrap{ position:relative; width:100%; height:100%; }
.postbox__carousel{
  display:flex; gap:8px; height:100%;
  justify-content:flex-start;
  overflow-x:auto; scroll-snap-type:x mandatory; -webkit-overflow-scrolling:touch;
  scrollbar-width:none; padding-bottom:6px;
}
.postbox__carousel::-webkit-scrollbar{ display:none; }
.postbox__carousel.is-single{ justify-content:center; }

.car-slide{
  flex:0 0 420px; max-width:520px; height:100%;
  object-fit:cover; border-radius:12px; scroll-snap-align:center; background:#0f1520;
}

.car-slide.car-contain{ object-fit:contain; background:#0b1220; }

.car-btn{
  position:absolute; top:50%; transform:translateY(-50%);
  border:0; background:rgba(0,0,0,.45); color:#fff;
  width:32px; height:32px; border-radius:999px;
  display:grid; place-items:center; cursor:pointer; z-index:3;
}
.car-btn--prev{ left:8px; }
.car-btn--next{ right:8px; }

.pv-sep{ border:0; border-top:1px solid rgb(191, 165, 255); margin:18px 0; }

.commentsbox{
  width:var(--card-w);
  max-height: 70vh;         
  overflow: auto;
  border:1px solid #1f2430; border-radius:16px; padding:16px; background:transparent;
}

.commentsbox__title{ margin:0 0 12px; font-size:20px; font-weight:900; color:#9fb3c7; }

.comment-form{
  display:grid; grid-template-columns:40px 1fr auto;
  gap:10px; align-items:center; margin-bottom:12px;
}
.cmt-avatar{ width:40px; height:40px; border-radius:50%; object-fit:cover; }
.comment-form textarea{
  height:40px; max-height:40px; resize:none; overflow:auto;
  border:1px solid #2a3242; background:#0f1520; color:#e9efff;
  border-radius:999px; padding:10px 14px; line-height:20px; font-weight: 400; 
}

.send-icon{ border:0; background:transparent; padding:6px; cursor:pointer; border-radius:10px; }
.send-icon img{ width:24px; height:24px; display:block; }

.comments{ display:grid; gap:12px; }
.comment{
  display:grid; grid-template-columns:40px 1fr; gap:10px;
  padding:10px; border:1px solid #1f2430; border-radius:12px; background:transparent;
  overflow: visible;
  position: relative;
}
.comment.is-muted{ opacity:.65; }

.comment__row{ display:flex; align-items:center; justify-content:space-between; gap:12px; }
.comment__who{ display:flex; flex-direction:column; gap:2px; }
.c-author{ font-weight:600; color:#bfa5ff; }
.c-time{ color:#7dd3fc; font-size:12px; }
.c-actions{ display:inline-flex; align-items:center; gap:8px; }

.comment__content{
  margin-top:6px;
  white-space:pre-wrap;
  overflow-wrap:anywhere;
  max-height:140px;
  overflow:auto;  
  color: var(--muted2); 
  font-weight:400;
}

.menu-wrap{ position:relative; }
.dots-btn{ border:0; background:none; padding:6px; cursor:pointer; }
.dots-btn img{ width:16px; height:16px; display:block; }

.popover{
  position:absolute; top:28px; right:0; min-width:190px; padding:8px;
  border:1px solid #2a3242; background:#0f1520; border-radius:12px;
  display:none; box-shadow:0 8px 24px rgba(0,0,0,.35);
}
.menu-wrap{ position:relative; z-index:4; }
.popover{
  position:absolute; top:28px; right:0; min-width:190px; padding:8px;
  border:1px solid #2a3242; background:#0f1520; border-radius:12px;
  display:none; box-shadow:0 8px 24px rgba(0,0,0,.45);
  z-index:10;       
}
.menu-wrap:hover .popover{ display:block; }

.switch-row{ display:flex; align-items:center; justify-content:space-between; gap:12px; padding:6px 8px; }
.switch-label{ color:#e9efff; font-size:14px; }
.switch{ position:relative; display:inline-block; width:44px; height:24px; }
.switch input{ opacity:0; width:0; height:0; }
.switch .slider{
  position:absolute; inset:0; background:#2a3242; border-radius:999px; transition:.2s ease;
}
.switch .slider::before{
  content:""; position:absolute; width:18px; height:18px; left:3px; top:3px;
  background:#e9efff; border-radius:50%; transition:.2s ease;
}
.switch input:checked + .slider{ background: rgb(191, 165, 255); }
.switch input:checked + .slider::before{ transform:translateX(20px); }

@media (max-width:760px){
  .postview-wrap, .postbox, .commentsbox{ width:92vw; }
  .car-slide{ flex-basis:92vw; max-width:92vw; }
}

.replies-toggle{
  margin-left: 50px;          
  margin-top: 6px;
  margin-bottom: 2px;
  display: inline-flex;
  align-items: center;
  gap: 8px;
  padding: 6px 10px;
  border: none;
  background: transparent;
  color: #facc15;;
  font-size: 13px;
  cursor: pointer;
  border-radius: 8px;
  transition: background .15s ease, opacity .15s ease;
}
.replies-toggle:hover{ background: rgba(31,36,48,.5); }
.replies-toggle:active{ opacity: .9; }

.replies-toggle__arrow{
  width: 8px;
  height: 8px;
  border-right: 2px solid #bfa5ff;
  border-bottom: 2px solid #bfa5ff;
  transform: rotate(-45deg);       
  transition: transform .15s ease;
}
.replies-toggle.is-open .replies-toggle__arrow{
  transform: rotate(135deg);
}

.comment-children{
  margin-left: 50px;          
  display: grid;
  gap: 12px;
  padding-left: 10px;
  border-left: 1px dashed #2a3242; 
}
